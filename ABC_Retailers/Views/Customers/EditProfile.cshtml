@model ABC_Retailers.Models.Customers
@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor

@{
    var user = HttpContextAccessor.HttpContext?.User;
    Layout = (user != null && user.IsInRole("Admin")) ? "_LayoutAdmin" : "_LayoutCustomer";
    ViewData["Title"] = "Edit My Profile";
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
}

@if (TempData["Success"] != null)
{
    <div class="alert alert-success">@TempData["SuccessMessage"]</div>
}

<style>
    body {
        background-color: #f5f5f5;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    }

    .edit-container {
        max-width: 800px;
        margin: 60px auto;
        padding: 0 15px;
    }

    .edit-card {
        background-color: #f0f0f0;
        border-left: 5px solid #e07a7a;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.12);
        padding: 35px 25px;
        overflow: hidden;
    }

    .edit-header {
        text-align: center;
        color: #333333;
        font-size: 1.8rem;
        margin-bottom: 30px;
        font-weight: 600;
    }

    label {
        font-weight: 600;
        color: #444444;
    }

    .form-control {
        border-radius: 6px;
        border: 1px solid #ccc;
        padding: 10px;
        margin-bottom: 20px;
        width: 100%;
        box-sizing: border-box;
    }

        .form-control:focus {
            border-color: #e07a7a;
            box-shadow: 0 0 5px rgba(224, 122, 122, 0.5);
            outline: none;
        }

    textarea.form-control {
        resize: vertical;
    }

    .row {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 10px;
    }

    .col-md-6, .col-md-12 {
        flex: 1;
        min-width: 250px;
    }

    .row.buttons-row {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 30px;
    }

    .buttons-row .col-md-6 {
        flex: 1;
        min-width: 200px;
    }

    .btn-gradient {
        background: #f0f0f0;
        border: 1px solid #e07a7a;
        color: #e07a7a;
        font-weight: 600;
        padding: 10px 25px;
        border-radius: 8px;
        transition: all 0.3s ease;
        text-align: center;
        width: 100%;
    }

        .btn-gradient:hover {
            background-color: #e07a7a;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

    .btn-cancel {
        background: white;
        border: 1px solid #e07a7a;
        color: #e07a7a;
    }

    @@media (max-width: 576px) {
        .col-md-6, .col-md-12 {
            min-width: 100%;
        }

        .buttons-row {
            flex-direction: column;
        }

            .buttons-row .col-md-6 {
                min-width: 100%;
            }
    }

    .buttons-row {
        flex-direction: column;
    }

        .buttons-row .col-md-6 {
            min-width: 100%;
        }

    }
</style>

<div class="edit-container">
    <div class="edit-card">
        <h2 class="edit-header">Edit My Details</h2>

        <form asp-action="EditProfile" method="post">
            @Html.AntiForgeryToken()
            <input type="hidden" name="PartitionKey" value="@Model.PartitionKey" />
            <input type="hidden" asp-for="RowKey" />
            <input type="hidden" asp-for="Timestamp" />
            <input type="hidden" asp-for="ETag" />

            <div class="row">
                <div class="col-md-6">
                    <label asp-for="FirstName"></label>
                    <input asp-for="FirstName" class="form-control" />
                    <span asp-validation-for="FirstName" class="text-danger"></span>
                </div>
                <div class="col-md-6">
                    <label asp-for="LastName"></label>
                    <input asp-for="LastName" class="form-control" />
                    <span asp-validation-for="LastName" class="text-danger"></span>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <label asp-for="Email"></label>
                    <input asp-for="Email" class="form-control" />
                    <span asp-validation-for="Email" class="text-danger"></span>
                </div>
                <div class="col-md-6">
                    <label asp-for="Username"></label>
                    <input asp-for="Username" class="form-control" readonly />
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <label asp-for="ShippingAddress"></label>
                    <textarea asp-for="ShippingAddress" class="form-control" rows="3"></textarea>
                    <span asp-validation-for="ShippingAddress" class="text-danger"></span>
                </div>
            </div>

            <div class="row buttons-row">
                <div class="col-md-6 text-start">
                    <a asp-controller="Customers" asp-action="MyProfile" class="btn-gradient btn-cancel">Cancel</a>
                </div>
                <div class="col-md-6 text-end">
                    <button type="submit" class="btn-gradient">Save Changes</button>
                </div>
            </div>
        </form>
    </div>
</div>
